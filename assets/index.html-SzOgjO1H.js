import{_ as n,o as s,c as a,a as p}from"./app-B6M6IRTl.js";const t="/assets/3-DIU4wlmI.png",e={},c=p(`<h1 id="express-ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#express-ä½¿ç”¨"><span>express ä½¿ç”¨</span></a></h1><h4 id="_1-1-express-ä¸‹è½½" tabindex="-1"><a class="header-anchor" href="#_1-1-express-ä¸‹è½½"><span>1.1 express ä¸‹è½½</span></a></h4><p>express æœ¬èº«æ˜¯ä¸€ä¸ª npm åŒ…ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ npm å®‰è£…</p><div class="language-text line-numbers-mode" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">npm init </span>
<span class="line">npm i express</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_1-2-express-åˆä½“éªŒ" tabindex="-1"><a class="header-anchor" href="#_1-2-express-åˆä½“éªŒ"><span>1.2 express åˆä½“éªŒ</span></a></h3><ol><li>åˆ›å»º JS æ–‡ä»¶ï¼Œé”®å…¥å¦‚ä¸‹ä»£ç </li></ol><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">//1. å¯¼å…¥ express</span></span>
<span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//2. åˆ›å»ºåº”ç”¨å¯¹è±¡</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//3. åˆ›å»ºè·¯ç”±è§„åˆ™</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/home&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">	res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;hello express server&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//4. ç›‘å¬ç«¯å£ å¯åŠ¨æœåŠ¡</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æœåŠ¡å·²ç»å¯åŠ¨, ç«¯å£ç›‘å¬ä¸º 3000...&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>å‘½ä»¤è¡Œä¸‹æ‰§è¡Œè¯¥è„šæœ¬</li></ol><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">node <span class="token operator">&lt;</span>æ–‡ä»¶å<span class="token operator">&gt;</span> # æˆ–è€… nodemon <span class="token operator">&lt;</span>æ–‡ä»¶å<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="3"><li>ç„¶ååœ¨æµè§ˆå™¨å°±å¯ä»¥è®¿é—® http://127.0.0.1:3000/home ğŸ‘Œ</li></ol><h3 id="_2-express-è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#_2-express-è·¯ç”±"><span>2 express è·¯ç”±</span></a></h3><h4 id="_2-1-ä»€ä¹ˆæ˜¯è·¯ç”±" tabindex="-1"><a class="header-anchor" href="#_2-1-ä»€ä¹ˆæ˜¯è·¯ç”±"><span>2.1 ä»€ä¹ˆæ˜¯è·¯ç”±</span></a></h4><p>å®˜æ–¹å®šä¹‰ï¼š è·¯ç”±ç¡®å®šäº†åº”ç”¨ç¨‹åºå¦‚ä½•å“åº”å®¢æˆ·ç«¯å¯¹ç‰¹å®šç«¯ç‚¹çš„è¯·æ±‚</p><h4 id="_2-2-è·¯ç”±çš„ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_2-2-è·¯ç”±çš„ä½¿ç”¨"><span>2.2 è·¯ç”±çš„ä½¿ç”¨</span></a></h4><p>ä¸€ä¸ªè·¯ç”±çš„ç»„æˆæœ‰ è¯·æ±‚æ–¹æ³• ï¼Œ è·¯å¾„ å’Œ å›è°ƒå‡½æ•° ç»„æˆ express ä¸­æä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•ï¼Œå¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨è·¯ç”±ï¼Œä½¿ç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">app<span class="token punctuation">.</span><span class="token operator">&lt;</span>method<span class="token operator">&gt;</span><span class="token punctuation">(</span>pathï¼Œcallback<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä»£ç ç¤ºä¾‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">//å¯¼å…¥ express</span></span>
<span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//åˆ›å»ºåº”ç”¨å¯¹è±¡</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//åˆ›å»º get è·¯ç”±</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/home&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;ç½‘ç«™é¦–é¡µ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//é¦–é¡µè·¯ç”±</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span>res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;æˆ‘æ‰æ˜¯çœŸæ­£çš„é¦–é¡µ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//åˆ›å»º post è·¯ç”±</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;ç™»å½•æˆåŠŸ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//åŒ¹é…æ‰€æœ‰çš„è¯·æ±‚æ–¹æ³•</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&#39;/search&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;1 ç§’é’Ÿä¸ºæ‚¨æ‰¾åˆ°ç›¸å…³ç»“æœçº¦ 100,000,000 ä¸ª&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//è‡ªå®šä¹‰ 404 è·¯ç”±</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token string">&quot;*&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">	res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;&lt;h1&gt;404 Not Found&lt;/h1&gt;&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//ç›‘å¬ç«¯å£ å¯åŠ¨æœåŠ¡</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;æœåŠ¡å·²ç»å¯åŠ¨, ç«¯å£ç›‘å¬ä¸º 3000&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-3-è·å–è¯·æ±‚å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_2-3-è·å–è¯·æ±‚å‚æ•°"><span>2.3 è·å–è¯·æ±‚å‚æ•°</span></a></h4><p>express æ¡†æ¶å°è£…äº†ä¸€äº› API æ¥æ–¹ä¾¿è·å–è¯·æ±‚æŠ¥æ–‡ä¸­çš„æ•°æ®ï¼Œå¹¶ä¸”å…¼å®¹åŸç”Ÿ HTTP æ¨¡å—çš„è·å–æ–¹å¼</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">//å¯¼å…¥ express</span></span>
<span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//åˆ›å»ºåº”ç”¨å¯¹è±¡</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//è·å–è¯·æ±‚çš„è·¯ç”±è§„åˆ™</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/request&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token comment">//1. è·å–æŠ¥æ–‡çš„æ–¹å¼ä¸åŸç”Ÿ HTTP è·å–æ–¹å¼æ˜¯å…¼å®¹çš„</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>method<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>httpVersion<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>headers<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//2. express ç‹¬æœ‰çš„è·å–æŠ¥æ–‡çš„æ–¹å¼</span></span>
<span class="line"><span class="token comment">//è·å–æŸ¥è¯¢å­—ç¬¦ä¸²</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span>query<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ã€ç›¸å¯¹é‡è¦ã€</span></span>
<span class="line"><span class="token comment">// è·å–æŒ‡å®šçš„è¯·æ±‚å¤´</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>req<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;host&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;è¯·æ±‚æŠ¥æ–‡çš„è·å–&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//å¯åŠ¨æœåŠ¡</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å¯åŠ¨æˆåŠŸ....&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-4è·å–è·¯ç”±å‚æ•°" tabindex="-1"><a class="header-anchor" href="#_2-4è·å–è·¯ç”±å‚æ•°"><span>2.4è·å–è·¯ç”±å‚æ•°</span></a></h4><p>è·¯ç”±å‚æ•°æŒ‡çš„æ˜¯ URL è·¯å¾„ä¸­çš„å‚æ•°ï¼ˆæ•°æ®ï¼‰</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/:id.html&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">    res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;å•†å“è¯¦æƒ…, å•†å“ id ä¸º&#39;</span> <span class="token operator">+</span> 				req<span class="token punctuation">.</span>params<span class="token punctuation">.</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_2-5express-å“åº”è®¾ç½®" tabindex="-1"><a class="header-anchor" href="#_2-5express-å“åº”è®¾ç½®"><span>2.5express å“åº”è®¾ç½®</span></a></h4><p>express æ¡†æ¶å°è£…äº†ä¸€äº› API æ¥æ–¹ä¾¿ç»™å®¢æˆ·ç«¯å“åº”æ•°æ®ï¼Œå¹¶ä¸”å…¼å®¹åŸç”Ÿ HTTP æ¨¡å—çš„è·å–æ–¹å¼</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">//è·å–è¯·æ±‚çš„è·¯ç”±è§„åˆ™</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&quot;/response&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line"><span class="token comment">//1. express ä¸­è®¾ç½®å“åº”çš„æ–¹å¼å…¼å®¹ HTTP æ¨¡å—çš„æ–¹å¼</span></span>
<span class="line">res<span class="token punctuation">.</span>statusCode <span class="token operator">=</span> <span class="token number">404</span><span class="token punctuation">;</span></span>
<span class="line">res<span class="token punctuation">.</span>statusMessage <span class="token operator">=</span> <span class="token string">&#39;xxx&#39;</span><span class="token punctuation">;</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">setHeader</span><span class="token punctuation">(</span><span class="token string">&#39;abc&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;xyz&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">write</span><span class="token punctuation">(</span><span class="token string">&#39;å“åº”ä½“&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//2. express çš„å“åº”æ–¹æ³•</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//è®¾ç½®å“åº”çŠ¶æ€ç </span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyy&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å“åº”å¤´</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;ä¸­æ–‡å“åº”ä¸ä¹±ç &#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//è®¾ç½®å“åº”ä½“</span></span>
<span class="line"><span class="token comment">//è¿è´¯æ“ä½œ</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">status</span><span class="token punctuation">(</span><span class="token number">404</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">&#39;xxx&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;yyy&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;ä½ å¥½æœ‹å‹&#39;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token comment">//3. å…¶ä»–å“åº”</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">redirect</span><span class="token punctuation">(</span><span class="token string">&#39;http://atguigu.com&#39;</span><span class="token punctuation">)</span><span class="token comment">//é‡å®šå‘</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">download</span><span class="token punctuation">(</span><span class="token string">&#39;./package.json&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//ä¸‹è½½å“åº”</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//å“åº” JSON</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">sendFile</span><span class="token punctuation">(</span>__dirname <span class="token operator">+</span> <span class="token string">&#39;/home.html&#39;</span><span class="token punctuation">)</span> <span class="token comment">//å“åº”æ–‡ä»¶å†…å®¹</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3express-ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_3express-ä¸­é—´ä»¶"><span>3express ä¸­é—´ä»¶</span></a></h3><h4 id="_3-1-ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-1-ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶"><span>3.1 ä»€ä¹ˆæ˜¯ä¸­é—´ä»¶</span></a></h4><p>ä¸­é—´ä»¶ï¼ˆMiddlewareï¼‰æœ¬è´¨æ˜¯ä¸€ä¸ªå›è°ƒå‡½æ•° ä¸­é—´ä»¶å‡½æ•° å¯ä»¥åƒè·¯ç”±å›è°ƒä¸€æ ·è®¿é—® è¯·æ±‚å¯¹è±¡ï¼ˆrequestï¼‰ ï¼Œ å“åº”å¯¹è±¡ï¼ˆresponseï¼‰</p><h4 id="_3-2-ä¸­é—´ä»¶çš„ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_3-2-ä¸­é—´ä»¶çš„ä½œç”¨"><span>3.2 ä¸­é—´ä»¶çš„ä½œç”¨</span></a></h4><p>ä¸­é—´ä»¶çš„ä½œç”¨ å°±æ˜¯ ä½¿ç”¨å‡½æ•°å°è£…å…¬å…±æ“ä½œï¼Œç®€åŒ–ä»£ç </p><h4 id="_3-3-ä¸­é—´ä»¶çš„ç±»å‹" tabindex="-1"><a class="header-anchor" href="#_3-3-ä¸­é—´ä»¶çš„ç±»å‹"><span>3.3 ä¸­é—´ä»¶çš„ç±»å‹</span></a></h4><p>å…¨å±€ä¸­é—´ä»¶</p><p>è·¯ç”±ä¸­é—´ä»¶</p><h4 id="_3-3-1å®šä¹‰å…¨å±€ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-3-1å®šä¹‰å…¨å±€ä¸­é—´ä»¶"><span>3.3.1å®šä¹‰å…¨å±€ä¸­é—´ä»¶</span></a></h4><p>æ¯ä¸€ä¸ªè¯·æ±‚ åˆ°è¾¾æœåŠ¡ç«¯ä¹‹å éƒ½ä¼šæ‰§è¡Œå…¨å±€ä¸­é—´ä»¶å‡½æ•°</p><p>å£°æ˜ä¸­é—´ä»¶å‡½æ•°</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">let</span> <span class="token function-variable function">recordMiddleware</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response<span class="token punctuation">,</span>next</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line"><span class="token comment">//å®ç°åŠŸèƒ½ä»£ç </span></span>
<span class="line"><span class="token comment">//.....</span></span>
<span class="line"><span class="token comment">//æ‰§è¡Œnextå‡½æ•°(å½“å¦‚æœå¸Œæœ›æ‰§è¡Œå®Œä¸­é—´ä»¶å‡½æ•°ä¹‹åï¼Œä»ç„¶ç»§ç»­æ‰§è¡Œè·¯ç”±ä¸­çš„å›è°ƒå‡½æ•°ï¼Œå¿…é¡»è°ƒç”¨next)</span></span>
<span class="line"><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><img src="`+t+`" alt=""></p><p>åº”ç”¨ä¸­é—´ä»¶</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>recordMiddleware<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>å£°æ˜æ—¶å¯ä»¥ç›´æ¥å°†åŒ¿åå‡½æ•°ä¼ é€’ç»™ use</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å®šä¹‰ç¬¬ä¸€ä¸ªä¸­é—´ä»¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-2å¤šä¸ªå…¨å±€ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-3-2å¤šä¸ªå…¨å±€ä¸­é—´ä»¶"><span>3.3.2å¤šä¸ªå…¨å±€ä¸­é—´ä»¶</span></a></h4><p>express å…è®¸ä½¿ç”¨ app.use() å®šä¹‰å¤šä¸ªå…¨å±€ä¸­é—´ä»¶</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å®šä¹‰ç¬¬ä¸€ä¸ªä¸­é—´ä»¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> response<span class="token punctuation">,</span> next</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;å®šä¹‰ç¬¬äºŒä¸ªä¸­é—´ä»¶&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-3-3-å®šä¹‰è·¯ç”±ä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-3-3-å®šä¹‰è·¯ç”±ä¸­é—´ä»¶"><span>3.3.3 å®šä¹‰è·¯ç”±ä¸­é—´ä»¶</span></a></h4><p>å¦‚æœ åªéœ€è¦å¯¹æŸä¸€äº›è·¯ç”±è¿›è¡ŒåŠŸèƒ½å°è£… ï¼Œåˆ™å°±éœ€è¦è·¯ç”±ä¸­é—´ä»¶ è°ƒç”¨æ ¼å¼å¦‚ä¸‹ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/è·¯å¾„&#39;</span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ä¸­é—´ä»¶å‡½æ•°</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/è·¯å¾„&#39;</span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ä¸­é—´ä»¶å‡½æ•°1</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">ä¸­é—´ä»¶å‡½æ•°2</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="_3-4é™æ€èµ„æºä¸­é—´ä»¶" tabindex="-1"><a class="header-anchor" href="#_3-4é™æ€èµ„æºä¸­é—´ä»¶"><span>3.4é™æ€èµ„æºä¸­é—´ä»¶</span></a></h4><p>express å†…ç½®å¤„ç†é™æ€èµ„æºçš„ä¸­é—´ä»¶</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">//å¼•å…¥expressæ¡†æ¶</span></span>
<span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//åˆ›å»ºæœåŠ¡å¯¹è±¡</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//é™æ€èµ„æºä¸­é—´ä»¶çš„è®¾ç½®ï¼Œå°†å½“å‰æ–‡ä»¶å¤¹ä¸‹çš„publicç›®å½•ä½œä¸ºç½‘ç«™çš„æ ¹ç›®å½•</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>express<span class="token punctuation">.</span><span class="token function">static</span><span class="token punctuation">(</span><span class="token string">&#39;./public&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//å½“ç„¶è¿™ä¸ªç›®å½•ä¸­éƒ½æ˜¯ä¸€äº›é™æ€èµ„æº</span></span>
<span class="line"><span class="token comment">//å¦‚æœè®¿é—®çš„å†…å®¹ç»å¸¸å˜åŒ–ï¼Œè¿˜æ˜¯éœ€è¦è®¾ç½®è·¯ç”±</span></span>
<span class="line"><span class="token comment">//ä½†æ˜¯ï¼Œåœ¨è¿™é‡Œæœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå¦‚æœpublicç›®å½•ä¸‹æœ‰index.htmlæ–‡ä»¶ï¼Œå•ç‹¬ä¹Ÿæœ‰index.htmlçš„è·¯ç”±ï¼Œ</span></span>
<span class="line"><span class="token comment">//åˆ™è°ä¹¦å†™åœ¨å‰ï¼Œä¼˜å…ˆæ‰§è¡Œè°</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/index.html&#39;</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">respsonse<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;é¦–é¡µ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//ç›‘å¬ç«¯å£</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3000 ç«¯å£å¯åŠ¨....&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>æ³¨æ„äº‹é¡¹: 1. index.html æ–‡ä»¶ä¸ºé»˜è®¤æ‰“å¼€çš„èµ„æº 2. å¦‚æœé™æ€èµ„æºä¸è·¯ç”±è§„åˆ™åŒæ—¶åŒ¹é…ï¼Œè°å…ˆåŒ¹é…è°å°±å“åº” 3. è·¯ç”±å“åº”åŠ¨æ€èµ„æºï¼Œé™æ€èµ„æºä¸­é—´ä»¶å“åº”é™æ€èµ„æº</p></blockquote><h4 id="_3-5è·å–è¯·æ±‚ä½“æ•°æ®-body-parser" tabindex="-1"><a class="header-anchor" href="#_3-5è·å–è¯·æ±‚ä½“æ•°æ®-body-parser"><span>3.5è·å–è¯·æ±‚ä½“æ•°æ® body-parser</span></a></h4><p>express å¯ä»¥ä½¿ç”¨ body-parser åŒ…å¤„ç†è¯·æ±‚ä½“</p><p>ç¬¬ä¸€æ­¥ï¼šå®‰è£…</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">npm i body<span class="token operator">-</span>parser</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç¬¬äºŒæ­¥ï¼šå¯¼å…¥ body-parser åŒ…</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">const</span> bodyParser <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;body-parser&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ç¬¬ä¸‰æ­¥ï¼šè·å–ä¸­é—´ä»¶å‡½æ•°</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">//å¤„ç† querystring æ ¼å¼çš„è¯·æ±‚ä½“</span></span>
<span class="line"><span class="token keyword">let</span> urlParser <span class="token operator">=</span> bodyParser<span class="token punctuation">.</span><span class="token function">urlencoded</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token literal-property property">extended</span><span class="token operator">:</span><span class="token boolean">false</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//å¤„ç† JSON æ ¼å¼çš„è¯·æ±‚ä½“</span></span>
<span class="line"><span class="token keyword">let</span> jsonParser <span class="token operator">=</span> bodyParser<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ç¬¬å››æ­¥ï¼šè®¾ç½®è·¯ç”±ä¸­é—´ä»¶ï¼Œç„¶åä½¿ç”¨ request.body æ¥è·å–è¯·æ±‚ä½“æ•°æ®</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">app<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">&#39;/login&#39;</span><span class="token punctuation">,</span> urlParser<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span>response</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line"><span class="token comment">//è·å–è¯·æ±‚ä½“æ•°æ®</span></span>
<span class="line"><span class="token comment">//console.log(request.body);</span></span>
<span class="line"><span class="token comment">//ç”¨æˆ·å</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>body<span class="token punctuation">.</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//å¯†ç </span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>request<span class="token punctuation">.</span>body<span class="token punctuation">.</span>userpass<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">response<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;è·å–è¯·æ±‚ä½“æ•°æ®&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>è·å–åˆ°çš„è¯·æ±‚ä½“æ•°æ®ï¼š</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token literal-property property">Object</span><span class="token operator">:</span> <span class="token keyword">null</span> prototype<span class="token punctuation">]</span> <span class="token punctuation">{</span> <span class="token literal-property property">username</span><span class="token operator">:</span> <span class="token string">&#39;admin&#39;</span><span class="token punctuation">,</span> <span class="token literal-property property">userpass</span><span class="token operator">:</span> <span class="token string">&#39;123456&#39;</span> <span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4router" tabindex="-1"><a class="header-anchor" href="#_4router"><span>4Router</span></a></h3><h4 id="_4-1-ä»€ä¹ˆæ˜¯-router" tabindex="-1"><a class="header-anchor" href="#_4-1-ä»€ä¹ˆæ˜¯-router"><span>4.1 ä»€ä¹ˆæ˜¯ Router</span></a></h4><p>express ä¸­çš„ Router æ˜¯ä¸€ä¸ªå®Œæ•´çš„ä¸­é—´ä»¶å’Œè·¯ç”±ç³»ç»Ÿï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªå°å‹çš„ app å¯¹è±¡ã€‚</p><h4 id="_4-2-router-ä½œç”¨" tabindex="-1"><a class="header-anchor" href="#_4-2-router-ä½œç”¨"><span>4.2 Router ä½œç”¨</span></a></h4><p>å¯¹è·¯ç”±è¿›è¡Œæ¨¡å—åŒ–ï¼Œæ›´å¥½çš„ç®¡ç†è·¯ç”±</p><h4 id="_4-3-router-ä½¿ç”¨" tabindex="-1"><a class="header-anchor" href="#_4-3-router-ä½¿ç”¨"><span>4.3 Router ä½¿ç”¨</span></a></h4><p>åˆ›å»ºç‹¬ç«‹çš„ JS æ–‡ä»¶ï¼ˆhomeRouter.jsï¼‰</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">//1. å¯¼å…¥ express</span></span>
<span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//2. åˆ›å»ºè·¯ç”±å™¨å¯¹è±¡</span></span>
<span class="line"><span class="token keyword">const</span> router <span class="token operator">=</span> express<span class="token punctuation">.</span><span class="token function">Router</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//3. åœ¨ router å¯¹è±¡èº«ä¸Šæ·»åŠ è·¯ç”±</span></span>
<span class="line">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;é¦–é¡µ&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line">router<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">&#39;/cart&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">req<span class="token punctuation">,</span> res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span></span>
<span class="line">res<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;è´­ç‰©è½¦&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//4. æš´éœ²</span></span>
<span class="line">module<span class="token punctuation">.</span>exports <span class="token operator">=</span> router<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>ä¸»æ–‡ä»¶</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token keyword">const</span> express <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;express&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">const</span> app <span class="token operator">=</span> <span class="token function">express</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//5.å¼•å…¥å­è·¯ç”±æ–‡ä»¶</span></span>
<span class="line"><span class="token keyword">const</span> homeRouter <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;./routes/homeRouter&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//6.è®¾ç½®å’Œä½¿ç”¨ä¸­é—´ä»¶</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">use</span><span class="token punctuation">(</span>homeRouter<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">app<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;3000 ç«¯å£å¯åŠ¨....&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_5ejs-æ¨¡æ¿å¼•æ“" tabindex="-1"><a class="header-anchor" href="#_5ejs-æ¨¡æ¿å¼•æ“"><span>5EJS æ¨¡æ¿å¼•æ“</span></a></h3><h4 id="_5-1ä»€ä¹ˆæ˜¯æ¨¡æ¿å¼•æ“" tabindex="-1"><a class="header-anchor" href="#_5-1ä»€ä¹ˆæ˜¯æ¨¡æ¿å¼•æ“"><span>5.1ä»€ä¹ˆæ˜¯æ¨¡æ¿å¼•æ“</span></a></h4><p>æ¨¡æ¿å¼•æ“æ˜¯åˆ†ç¦» ç”¨æˆ·ç•Œé¢å’Œä¸šåŠ¡æ•°æ® çš„ä¸€ç§æŠ€æœ¯</p><h4 id="_5-2-ä»€ä¹ˆæ˜¯-ejs" tabindex="-1"><a class="header-anchor" href="#_5-2-ä»€ä¹ˆæ˜¯-ejs"><span>5.2 ä»€ä¹ˆæ˜¯ EJS</span></a></h4><p>EJS æ˜¯ä¸€ä¸ªé«˜æ•ˆçš„ Javascript çš„æ¨¡æ¿å¼•æ“</p><p>å®˜ç½‘: https://ejs.co/</p><p>ä¸­æ–‡ç«™ï¼šhttps://ejs.bootcss.com/</p><h4 id="_5-3-ejs-åˆä½“éªŒ" tabindex="-1"><a class="header-anchor" href="#_5-3-ejs-åˆä½“éªŒ"><span>5.3 EJS åˆä½“éªŒ</span></a></h4><p>ä¸‹è½½å®‰è£…EJS</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line">npm i ejs <span class="token operator">--</span>save</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>ä»£ç ç¤ºä¾‹</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token comment">//1.å¼•å…¥ejs</span></span>
<span class="line"><span class="token keyword">const</span> ejs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;ejs&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//2.å®šä¹‰æ•°æ®</span></span>
<span class="line"><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">&#39;å¼ ä¸‰&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;æå››&#39;</span><span class="token punctuation">,</span><span class="token string">&#39;ç‹äºŒéº»å­&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//3.ejsè§£ææ¨¡æ¿è¿”å›ç»“æ„</span></span>
<span class="line"><span class="token comment">//&lt;%= %&gt; æ˜¯ejsè§£æå†…å®¹çš„æ ‡è®°ï¼Œä½œç”¨æ˜¯è¾“å‡ºå½“å‰è¡¨è¾¾å¼çš„æ‰§è¡Œç»“æ„</span></span>
<span class="line"><span class="token keyword">let</span> html <span class="token operator">=</span> ejs<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>â€˜<span class="token operator">&lt;</span><span class="token operator">%=</span> person<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span> <span class="token operator">%</span><span class="token operator">&gt;</span>â€™<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">person</span><span class="token operator">:</span>person<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token comment">//4.è¾“å‡ºç»“æœ</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>html<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>å‘½ä»¤è¡Œä¸‹è¿è¡Œ</p><h4 id="_5-4-ejs-å¸¸ç”¨è¯­æ³•" tabindex="-1"><a class="header-anchor" href="#_5-4-ejs-å¸¸ç”¨è¯­æ³•"><span>5.4 EJS å¸¸ç”¨è¯­æ³•</span></a></h4><p>æ‰§è¡ŒJSä»£ç </p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">%</span> code <span class="token operator">%</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¾“å‡ºè½¬ä¹‰çš„æ•°æ®åˆ°æ¨¡æ¿ä¸Š</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">%=</span> code <span class="token operator">%</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>è¾“å‡ºéè½¬ä¹‰çš„æ•°æ®åˆ°æ¨¡æ¿ä¸Š</p><div class="language-javascript line-numbers-mode" data-ext="js" data-title="js"><pre class="language-javascript"><code><span class="line"><span class="token operator">&lt;</span><span class="token operator">%</span><span class="token operator">-</span> code <span class="token operator">%</span><span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,96),l=[c];function o(i,u){return s(),a("div",null,l)}const k=n(e,[["render",o],["__file","index.html.vue"]]),d=JSON.parse('{"path":"/category/server/node/express/","title":"express ä½¿ç”¨","lang":"en-US","frontmatter":{},"headers":[{"level":3,"title":"1.2 express åˆä½“éªŒ","slug":"_1-2-express-åˆä½“éªŒ","link":"#_1-2-express-åˆä½“éªŒ","children":[]},{"level":3,"title":"2 express è·¯ç”±","slug":"_2-express-è·¯ç”±","link":"#_2-express-è·¯ç”±","children":[]},{"level":3,"title":"3express ä¸­é—´ä»¶","slug":"_3express-ä¸­é—´ä»¶","link":"#_3express-ä¸­é—´ä»¶","children":[]},{"level":3,"title":"4Router","slug":"_4router","link":"#_4router","children":[]},{"level":3,"title":"5EJS æ¨¡æ¿å¼•æ“","slug":"_5ejs-æ¨¡æ¿å¼•æ“","link":"#_5ejs-æ¨¡æ¿å¼•æ“","children":[]}],"git":{"updatedTime":1722389973000,"contributors":[{"name":"codePiece","email":"1749967714@qq.com","commits":1}]},"filePathRelative":"category/server/node/express/index.md","excerpt":"\\n<h4>1.1 express ä¸‹è½½</h4>\\n<p>express æœ¬èº«æ˜¯ä¸€ä¸ª npm åŒ…ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡ npm å®‰è£…</p>\\n<div class=\\"language-text\\" data-ext=\\"text\\" data-title=\\"text\\"><pre class=\\"language-text\\"><code><span class=\\"line\\">npm init </span>\\n<span class=\\"line\\">npm i express</span>\\n<span class=\\"line\\"></span></code></pre></div><h3>1.2 express åˆä½“éªŒ</h3>"}');export{k as comp,d as data};
